#!/bin/sh
# Create a SVG graphic showing service initialization and display it

TEMP=$(mktemp --tmpdir systemd-analyze-plot.XXXXXXXXXX.svg)
trap 'rm -f "$TEMP"' EXIT HUP INT QUIT TERM
if systemd-analyze plot > "$TEMP"
then
    xdg-open "$TEMP"
    echo "Press 'Enter' to quit."
    read DUMMY 2> /dev/null
else
    exit $?
fi

# This is not needed (because of the "trap"), but better be safe than sorry
rm -f "$TEMP"
